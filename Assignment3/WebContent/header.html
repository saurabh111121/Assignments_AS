<!DOCTYPE html>
<html>

<head>
    <meta charset="ISO-8859-1">
    <title>header.html</title>

    <style>
        /* Navbar margin  */
        #margin123 {
            margin-left: 1%;
            margin-right: 2%;
            text-align: center;
        }
    </style>
</head>

<body>


    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="margin123">
        <a class="navbar-brand" href="#"><b>AMAZON</b></a>
        <!-- <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button> -->

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02"
            aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">

            <div class="ml-auto navbar-nav " id="navbarSupportedContent">
                <ul class=" nav navbar-nav">

                    <li class="nav-item">
                        <a class="nav-link" href="table.jsp">TABLE</a>
                    </li>

                    <!-- ---------------------------------------------------------------------------------------------------------------------------------------- -->
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#myModal">FORM</a>
                    </li>
                    <!-- The Modal -->

                    <div class="modal" id="myModal">
                        <div class="modal-dialog ">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title w-100 text-center">ADD EMPLOYEE DETAILS</h4>

                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">
                                    <div class="justify-content-center ">
                                        <form action="#" id="myForm" class="needs-validation" novalidate>


                                            <div class="form-group row">
                                                <label for="last" class="col-sm-2 col-form-label">Login:</label>
                                                <div class="col-sm-10">
                                                    <input type="text" class="form-control" id="login_id" name="login"
                                                        required autocomplete="off" autocapitalize="on" />
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <label for="first" class="col-sm-2 col-form-label">Name:</label>
                                                <div class="col-sm-10">
                                                    <input type="text" id="name_id" name="Name" class="form-control"
                                                        required autocomplete="off" autocapitalize="on" />
                                                </div>
                                            </div>


                                            <div class="form-group row">
                                                <label for="OU" class="col-sm-2 col-form-label">OU: </label>
                                                <div class="col-sm-10">
                                                    <select class="custom-select" name="OU" id="ou_id" required>
                                                        <option value="" class="">Select your OU</option>
                                                        <option>NA</option>
                                                        <option>IN</option>
                                                        <option>UK</option>
                                                        <option>JP</option>
                                                        <option>AU</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <label for="comment" class="col-sm-2 col-form-label">Comments:</label>
                                                <div class="col-sm-10">
                                                    <input type="text" id="comments_id" name="Comments"
                                                        class="form-control" required autocomplete="off"
                                                        autocapitalize="on" />
                                                </div>
                                            </div>

                                            <div class="form-group row radio_is_permanent">
                                                <label for="Permanent" class="col-sm-4 col-form-label">Is
                                                    Permanent:</label>
                                                <div class="custom-control custom-radio col-sm-4">
                                                    <input type="radio" class="custom-control-input" id="yes_id"
                                                        name="is_permanent" value="yes" required>
                                                    <label class="custom-control-label" for="yes_id">Yes</label>
                                                </div>
                                                <div class="custom-control custom-radio col-sm-4">
                                                    <input type="radio" class="custom-control-input" id="no_id"
                                                        name="is_permanent" value="no" required>
                                                    <label class="custom-control-label" for="no_id">No</label>
                                                </div>

                                            </div>

                                            <label id="warn1" style="color: red; visibility: hidden;">All the fields are
                                                mandatory!</label>


                                            <div class="form-group">
                                                <button class="btn btn-primary" id="btnSubmit"
                                                    type="submit">Submit</button>
                                            </div>

                                        </form>
                                        </main>

                                        <script>
                                            (function () {
                                                window.addEventListener('load', function () {
                                                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                                                    var forms = document.getElementsByClassName('needs-validation');
                                                    // Loop over them and prevent submission
                                                    var validation = Array.prototype.filter.call(forms, function (form) {
                                                        form.addEventListener('submit', function (event) {
                                                            if (form.checkValidity() === false) {
                                                                event.preventDefault();
                                                                event.stopPropagation();
                                                            }
                                                            form.classList.add('was-validated');
                                                            if (form.checkValidity() == true) {
                                                                event.preventDefault();
                                                                var xdata = {
                                                                    Login: login_id.value,
                                                                    Name: name_id.value,
                                                                    OU: ou_id.value,
                                                                    Comments: comments_id.value,
                                                                    Is_permanent: $("input[type='radio'][name='is_permanent']:checked").val()
                                                                }
                                                                console.log(JSON.stringify(xdata));
                                                                document.forms[0].reset();
                                                                document.getElementById('myForm').classList.remove("was-validated");

                                                            }

                                                        }, false); // end of function(event)
                                                    });   //end of function(form)
                                                }, false); //end of  window.addEventListener('load', function () 
                                            })();  // end of funtion()

                                        </script>
                                    </div>
                                </div>

                                <!-- Modal footer -->


                            </div>
                        </div>
                    </div>
                    <!------------------------------------------------------------------------------------------------------------------------------------------ -->

                    <li class="nav-item">
                        <a class="nav-link" href="#" data-toggle="modal" data-target="#update_Modal">UPDATE</a>
                    </li>

                    <!-- The Modal -->
                    <div class="modal" id="update_Modal">
                        <div class="modal-dialog">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title w-100 text-center">UPDATE FORM</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">
                                    <div class="">
                                        <!-- exclued the container class from here-->

                                        <form action="#" id="update_Form" class="needs-validation1" novalidate>


                                            <div class="form-group row">
                                                <label for="id" class="col-sm-4 col-form-label">Employee Id:</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" id="up_emp_id" name="emp_id"
                                                        onfocusout="myFunction1()" required />
                                                </div>
                                            </div>


                                            <div class="form-group row">
                                                <label for="site" class="col-sm-4 col-form-label">Site: </label>
                                                <div class="col-sm-8">
                                                    <select class="custom-select" name="site" id="up_site_id" required>
                                                        <option value="" class="">Select your Site</option>
                                                        <option>DEL</option>
                                                        <option>PNQ</option>
                                                        <option>HYD</option>
                                                        <option>CJB</option>
                                                        <option>VCS</option>
                                                    </select>
                                                </div>
                                            </div>


                                            <div class="form-group row">
                                                <label for="supervisor"
                                                    class="col-sm-4 col-form-label">Supervisor:</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" id="up_supervisor_id"
                                                        name="supervisor" required />
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <label for="login" class="col-sm-4 col-form-label"> Login:</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" id="up_login_id"
                                                        name="login" disabled="disabled" />
                                                </div>
                                            </div>


                                            <div class="form-group row">
                                                <label for="business title" class="col-sm-4 col-form-label"> Business
                                                    Title:</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" id="up_businessTitle_id"
                                                        name="businessTitle" required />
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <label for="department" class="col-sm-4 col-form-label">
                                                    Department:</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" id="up_department_id"
                                                        name="department" required />
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <p id="updateForm_warning" style="color: red; visibility: bold;">Note :
                                                    Make sure that the emp_id is from the database,otherwise it won't
                                                    get reflected.</p>
                                            </div>

                                            <div class="form-group">
                                                <button class="btn btn-success">Submit</button>
                                            </div>


                                        </form>

                                        <script>
                                            var Employee_details = [
                                                {
                                                    emp_id: 123456,
                                                    login: "kalasaur",
                                                    site: "DEL",
                                                    supervisor: "abhinay",
                                                    department: "Automation",
                                                    businessTitle: "CS Associate"
                                                }, {
                                                    emp_id: 12345,
                                                    login: "qwerty",
                                                    site: "PNQ",
                                                    supervisor: "Rohit",
                                                    department: "quality",
                                                    businessTitle: "CS quality"
                                                }, {
                                                    emp_id: 123,
                                                    login: "login3",
                                                    site: "HYD",
                                                    supervisor: "Rishab",
                                                    department: "Tech Support",
                                                    businessTitle: "CS Support"

                                                }, {
                                                    emp_id: 101010,
                                                    login: "ankusraw",
                                                    site: "DEL",
                                                    supervisor: "jamil",
                                                    department: "operations",
                                                    businessTitle: "GRPM"

                                                }, {
                                                    emp_id: 121212,
                                                    login: "ashnagpa",
                                                    site: "CJB",
                                                    supervisor: "Ashim",
                                                    department: "operations",
                                                    businessTitle: "Team Manager"

                                                }, {
                                                    emp_id: 131313,
                                                    login: "nnhimans",
                                                    site: "PNQ",
                                                    supervisor: "Rohit",
                                                    department: "operations",
                                                    businessTitle: "CS Associate"

                                                }
                                            ]
                                            function myFunction1() {
                                                var x = document.getElementById('up_emp_id').value;

                                                for (var i = 0; i < Employee_details.length; i++) {
                                                    if (Employee_details[i].emp_id == x) {
                                                        document.getElementById('up_site_id').value = Employee_details[i].site;
                                                        document.getElementById('up_supervisor_id').value = Employee_details[i].supervisor;
                                                        document.getElementById('up_login_id').value = Employee_details[i].login;
                                                        document.getElementById('up_businessTitle_id').value = Employee_details[i].businessTitle;
                                                        document.getElementById('up_department_id').value = Employee_details[i].department;

                                                    }
                                                }
                                            } //myFunction1 end

                                            (function () {
                                                window.addEventListener('load', function () {
                                                    var ayx = document.getElementsByClassName('needs-validation1');
                                                    var validation = Array.prototype.filter.call(ayx, function (form) {
                                                        form.addEventListener('submit', function (event) {
                                                            if (form.checkValidity() === false) {
                                                                event.preventDefault();
                                                                event.stopPropagation();
                                                            }
                                                            form.classList.add('was-validated');
                                                            //enter your code here
                                                            if (form.checkValidity() == true) {

                                                                var empid = document.getElementById('up_emp_id').value;
                                                                var site = document.getElementById('up_site_id').value;
                                                                var supervisor = document.getElementById('up_supervisor_id').value;
                                                                var login = document.getElementById('up_login_id').value;
                                                                var businessTitle = document.getElementById('up_businessTitle_id').value;
                                                                var department = document.getElementById('up_department_id').value;

                                                                for (var i = 0; i < Employee_details.length; i++) {
                                                                    if (Employee_details[i].emp_id == empid) {
                                                                        document.getElementById('index_emp_id').value = empid;
                                                                        document.getElementById('index_site_id').value = site;
                                                                        document.getElementById('index_supervisor_id').value = supervisor;
                                                                        document.getElementById('change_businessTitle').innerHTML = businessTitle;
                                                                        document.getElementById('change_department').innerHTML = department;
                                                                        document.getElementById('change_login_id').innerHTML = login;
                                                                    }

                                                                }
                                                                event.preventDefault(); // avoiding page refresh here 
                                                                document.getElementById('update_Form').reset(); // clearing form data                                                   
                                                                document.getElementById('update_Form').classList.remove("was-validated"); // clearing validation
                                                                $('#update_Modal').modal('toggle'); // auto-closing modal on clicking the subnmit button


                                                            }

                                                        }, false);
                                                    });
                                                }, false);
                                            })(); 
                                        </script>


                                    </div>
                                </div>

                                <!-- Modal footer -->

                            </div>
                        </div>
                    </div>
                    <!-- ------------------------------------------------------------------------------------------------------------------------------------------- -->


                    <li class="nav-item active">
                        <a class="nav-link" href="Index.jsp">HOME <span class="sr-only">(current)</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


</body>

</html>